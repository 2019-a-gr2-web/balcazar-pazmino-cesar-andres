<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

<!--cualquier ejercicio https://github.com/nestjs/nest/tree/master/sample-->
<script src="socket.io.js"></script>
<!--<script src="/websockets/socket.io.js"></script>                  path absoluto-->

<script>
    const url = 'http://localhost:3001/websockets';
    const socket = io(url);
    console.log('ya mismo nos conectamos :v');
    socket.on(
        'connect', //nombre del evento
        ()=>{
            console.log('estamos conectados!'); //toda la logica siempre que el servidor se baja y sube se implementa aqui
            /*socket.disconnect();
            setTimeout(
                ()=>{
                    socket.connect();
                },3000
            )*/
        }
    );


    socket.on(
        'disconnect', //nombre del evento, hay muchos eventos como el reconnect, etc
        ()=>{
            console.log('no estamos conectados alv =(!'); //toda la logica siempre que el servidor se baja y sube se implementa aqui
        }
    );

    socket.on(
        'saludaron', //nombre del evento, hay muchos eventos como el reconnect, etc
        ()=>{
            console.log('nos saludaron'); //toda la logica siempre que el servidor se baja y sube se implementa aqui
        }
    );


    //CLIENTE
    function peticionHolaMundo() {
        const nombreMetodo='holaMundo';
        const datos={
            nombre:'Cesar'
        };
        socket.emit(
            nombreMetodo,
            datos,
            (respuesta)=>{//callback
                console.log(respuesta);
            }

        )
    }
</script>


</body>
</html>